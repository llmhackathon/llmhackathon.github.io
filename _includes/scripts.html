<script>
    // Countdown Timer
    const countdown = () => {
        const countDate = new Date('{{ site.event.countdown_date }}').getTime();
        const now = new Date().getTime();
        const gap = countDate - now;

        const second = 1000;
        const minute = second * 60;
        const hour = minute * 60;
        const day = hour * 24;

        const textDay = Math.floor(gap / day);
        const textHour = Math.floor((gap % day) / hour);
        const textMinute = Math.floor((gap % hour) / minute);
        const textSecond = Math.floor((gap % minute) / second);

        const countdownElement = document.getElementById('countdown');
        if (countdownElement) {
            countdownElement.innerHTML = `
                <div>${textDay}<span>Days</span></div>
                <div>${textHour}<span>Hours</span></div>
                <div>${textMinute}<span>Mins</span></div>
                <div>${textSecond}<span>Secs</span></div>
            `;
        }
    };

    // Only run countdown if countdown element exists
    if (document.getElementById('countdown')) {
        setInterval(countdown, 1000);
    }

    // FAQ Accordion
    const faqItems = document.querySelectorAll('.faq-item');
    faqItems.forEach(item => {
        const question = item.querySelector('.faq-question');
        if (question) {
            question.addEventListener('click', () => {
                const answer = item.querySelector('.faq-answer');
                item.classList.toggle('active');
                if (item.classList.contains('active')) {
                    answer.style.maxHeight = answer.scrollHeight + "px";
                } else {
                    answer.style.maxHeight = null;
                }
            });
        }
    });

    // Video Modal Functions
    function openVideoModal(videoId, title) {
        const modal = document.getElementById('videoModal');
        const videoFrame = document.getElementById('videoFrame');
        const videoTitle = document.getElementById('videoTitle');
        
        videoFrame.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
        videoTitle.textContent = title;
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function closeVideoModal() {
        const modal = document.getElementById('videoModal');
        const videoFrame = document.getElementById('videoFrame');
        
        modal.style.display = 'none';
        videoFrame.src = '';
        document.body.style.overflow = 'auto';
    }

    // Close modal when pressing Escape key
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape') {
            closeVideoModal();
        }
    });

    // Make functions globally accessible
    window.openVideoModal = openVideoModal;
    window.closeVideoModal = closeVideoModal;

    // Loader
    window.addEventListener('load', () => {
        const loader = document.querySelector('.loader-wrapper');
        if (loader) {
            loader.classList.add('loader-hidden');
            loader.addEventListener('transitionend', () => {
                if (document.body.contains(loader)) {
                    document.body.removeChild(loader);
                }
            });
        }
    });
</script>